<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disponibilidad de Apartamentos - Vista de Edificio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .modal-transition {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .modal-hidden {
            opacity: 0;
            transform: scale(0.95);
            pointer-events: none;
        }

        .modal-visible {
            opacity: 1;
            transform: scale(1);
            pointer-events: auto;
        }
    </style>
</head>

<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="mb-8 text-center">
            <h1 id="project-name" class="text-3xl sm:text-4xl font-bold text-gray-900">Proyecto RIVER PARK</h1>
            <p class="text-lg text-gray-600 mt-1">Disponibilidad por Piso</p>

            <div class="flex flex-wrap gap-4 mt-6 justify-center">
                <div class="flex items-center"><span
                        class="w-5 h-5 rounded-full bg-green-500 mr-2 border border-green-600 shadow-sm"></span><span>Disponible</span>
                </div>
                <div class="flex items-center"><span
                        class="w-5 h-5 rounded-full bg-yellow-400 mr-2 border border-yellow-500 shadow-sm"></span><span>Reservado</span>
                </div>
                <div class="flex items-center"><span
                        class="w-5 h-5 rounded-full bg-red-500 mr-2 border border-red-600 shadow-sm"></span><span>Vendido</span>
                </div>
                <div class="flex items-center"><span
                        class="w-5 h-5 rounded-full bg-gray-400 mr-2 border border-gray-500 shadow-sm"></span><span>Otro</span>
                </div>
            </div>
        </header>

        <main id="building-layout" class="bg-white p-4 sm:p-6 rounded-2xl shadow-lg space-y-4">
            <!-- Estado de Carga Inicial -->
            <div id="loading-state" class="col-span-full flex flex-col items-center justify-center py-16">
                <p id="loading-message" class="mt-4 text-gray-600 font-semibold">Cargando y construyendo la vista del
                    edificio...</p>
            </div>
            <!-- Los pisos se insertarán aquí dinámicamente -->
        </main>
    </div>

    <!-- Modal para detalles del Inmueble -->
    <div id="details-modal"
        class="modal-transition modal-hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md mx-auto transform">
            <div id="modal-content" class="p-6"></div>
            <div class="bg-gray-50 px-6 py-4 rounded-b-2xl text-right">
                <button onclick="closeModal()"
                    class="px-6 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors">Cerrar</button>
            </div>
        </div>
    </div>

    <script>
        // --- DATOS DE EJEMPLO ---
        // JSON generado a partir de la imagen proporcionada.
        const apartmentData = [
            { "id_interno": "INT-APT-3001", "titulo_item": "APT-3001", "precio": 700000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-3002", "titulo_item": "APT-3002", "precio": 701000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-3003", "titulo_item": "APT-3003", "precio": 702000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-3004", "titulo_item": "APT-3004", "precio": 703000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-3005", "titulo_item": "APT-3005", "precio": 704000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-3006", "titulo_item": "APT-3006", "precio": 705000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-3007", "titulo_item": "APT-3007", "precio": 706000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-3008", "titulo_item": "APT-3008", "precio": 707000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2901", "titulo_item": "APT-2901", "precio": 690000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2902", "titulo_item": "APT-2902", "precio": 691000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2903", "titulo_item": "APT-2903", "precio": 692000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2904", "titulo_item": "APT-2904", "precio": 693000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2905", "titulo_item": "APT-2905", "precio": 694000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2906", "titulo_item": "APT-2906", "precio": 695000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2907", "titulo_item": "APT-2907", "precio": 696000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2908", "titulo_item": "APT-2908", "precio": 697000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2801", "titulo_item": "APT-2801", "precio": 680000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2802", "titulo_item": "APT-2802", "precio": 681000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2803", "titulo_item": "APT-2803", "precio": 682000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2804", "titulo_item": "APT-2804", "precio": 683000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2805", "titulo_item": "APT-2805", "precio": 684000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2806", "titulo_item": "APT-2806", "precio": 685000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2807", "titulo_item": "APT-2807", "precio": 686000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2808", "titulo_item": "APT-2808", "precio": 687000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2701", "titulo_item": "APT-2701", "precio": 670000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2702", "titulo_item": "APT-2702", "precio": 671000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2703", "titulo_item": "APT-2703", "precio": 672000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2704", "titulo_item": "APT-2704", "precio": 673000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2705", "titulo_item": "APT-2705", "precio": 674000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2706", "titulo_item": "APT-2706", "precio": 675000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2707", "titulo_item": "APT-2707", "precio": 676000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2708", "titulo_item": "APT-2708", "precio": 677000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2601", "titulo_item": "APT-2601", "precio": 660000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2602", "titulo_item": "APT-2602", "precio": 661000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2603", "titulo_item": "APT-2603", "precio": 662000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2604", "titulo_item": "APT-2604", "precio": 663000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2605", "titulo_item": "APT-2605", "precio": 664000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2606", "titulo_item": "APT-2606", "precio": 665000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2607", "titulo_item": "APT-2607", "precio": 666000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2608", "titulo_item": "APT-2608", "precio": 667000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2501", "titulo_item": "APT-2501", "precio": 650000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2502", "titulo_item": "APT-2502", "precio": 651000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2503", "titulo_item": "APT-2503", "precio": 652000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2504", "titulo_item": "APT-2504", "precio": 653000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2505", "titulo_item": "APT-2505", "precio": 654000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2506", "titulo_item": "APT-2506", "precio": 655000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2507", "titulo_item": "APT-2507", "precio": 656000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2508", "titulo_item": "APT-2508", "precio": 657000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2401", "titulo_item": "APT-2401", "precio": 640000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2402", "titulo_item": "APT-2402", "precio": 641000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2403", "titulo_item": "APT-2403", "precio": 642000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2404", "titulo_item": "APT-2404", "precio": 643000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2405", "titulo_item": "APT-2405", "precio": 644000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2406", "titulo_item": "APT-2406", "precio": 645000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2407", "titulo_item": "APT-2407", "precio": 646000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2408", "titulo_item": "APT-2408", "precio": 647000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2301", "titulo_item": "APT-2301", "precio": 630000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2302", "titulo_item": "APT-2302", "precio": 631000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2303", "titulo_item": "APT-2303", "precio": 632000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2304", "titulo_item": "APT-2304", "precio": 633000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2305", "titulo_item": "APT-2305", "precio": 634000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2306", "titulo_item": "APT-2306", "precio": 635000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2307", "titulo_item": "APT-2307", "precio": 636000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2308", "titulo_item": "APT-2308", "precio": 637000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2201", "titulo_item": "APT-2201", "precio": 620000000, "moneda": "COP", "estado": "reservado", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2202", "titulo_item": "APT-2202", "precio": 621000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2203", "titulo_item": "APT-2203", "precio": 622000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2204", "titulo_item": "APT-2204", "precio": 623000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2205", "titulo_item": "APT-2205", "precio": 624000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2206", "titulo_item": "APT-2206", "precio": 625000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2207", "titulo_item": "APT-2207", "precio": 626000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2208", "titulo_item": "APT-2208", "precio": 627000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2101", "titulo_item": "APT-2101", "precio": 610000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2102", "titulo_item": "APT-2102", "precio": 611000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2103", "titulo_item": "APT-2103", "precio": 612000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2104", "titulo_item": "APT-2104", "precio": 613000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2105", "titulo_item": "APT-2105", "precio": 614000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2106", "titulo_item": "APT-2106", "precio": 615000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2107", "titulo_item": "APT-2107", "precio": 616000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2108", "titulo_item": "APT-2108", "precio": 617000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2001", "titulo_item": "APT-2001", "precio": 600000000, "moneda": "COP", "estado": "reservado", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2002", "titulo_item": "APT-2002", "precio": 601000000, "moneda": "COP", "estado": "reservado", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2003", "titulo_item": "APT-2003", "precio": 602000000, "moneda": "COP", "estado": "reservado", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2004", "titulo_item": "APT-2004", "precio": 603000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2005", "titulo_item": "APT-2005", "precio": 604000000, "moneda": "COP", "estado": "reservado", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2006", "titulo_item": "APT-2006", "precio": 605000000, "moneda": "COP", "estado": "reservado", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2007", "titulo_item": "APT-2007", "precio": 606000000, "moneda": "COP", "estado": "reservado", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-2008", "titulo_item": "APT-2008", "precio": 607000000, "moneda": "COP", "estado": "reservado", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1901", "titulo_item": "APT-1901", "precio": 590000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1902", "titulo_item": "APT-1902", "precio": 591000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1903", "titulo_item": "APT-1903", "precio": 592000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1904", "titulo_item": "APT-1904", "precio": 593000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1905", "titulo_item": "APT-1905", "precio": 594000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1906", "titulo_item": "APT-1906", "precio": 595000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1907", "titulo_item": "APT-1907", "precio": 596000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1908", "titulo_item": "APT-1908", "precio": 597000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1801", "titulo_item": "APT-1801", "precio": 580000000, "moneda": "COP", "estado": "reservado", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1802", "titulo_item": "APT-1802", "precio": 581000000, "moneda": "COP", "estado": "reservado", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1803", "titulo_item": "APT-1803", "precio": 582000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1804", "titulo_item": "APT-1804", "precio": 583000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1805", "titulo_item": "APT-1805", "precio": 584000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1806", "titulo_item": "APT-1806", "precio": 585000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1807", "titulo_item": "APT-1807", "precio": 586000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1808", "titulo_item": "APT-1808", "precio": 587000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1701", "titulo_item": "APT-1701", "precio": 570000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1702", "titulo_item": "APT-1702", "precio": 571000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1703", "titulo_item": "APT-1703", "precio": 572000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1704", "titulo_item": "APT-1704", "precio": 573000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1705", "titulo_item": "APT-1705", "precio": 574000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1706", "titulo_item": "APT-1706", "precio": 575000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1707", "titulo_item": "APT-1707", "precio": 576000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1708", "titulo_item": "APT-1708", "precio": 577000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1601", "titulo_item": "APT-1601", "precio": 560000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1602", "titulo_item": "APT-1602", "precio": 561000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1603", "titulo_item": "APT-1603", "precio": 562000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1604", "titulo_item": "APT-1604", "precio": 563000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1605", "titulo_item": "APT-1605", "precio": 564000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1606", "titulo_item": "APT-1606", "precio": 565000000, "moneda": "COP", "estado": "reservado", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1607", "titulo_item": "APT-1607", "precio": 566000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1608", "titulo_item": "APT-1608", "precio": 567000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1501", "titulo_item": "APT-1501", "precio": 550000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1502", "titulo_item": "APT-1502", "precio": 551000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1503", "titulo_item": "APT-1503", "precio": 552000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1504", "titulo_item": "APT-1504", "precio": 553000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1505", "titulo_item": "APT-1505", "precio": 554000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1506", "titulo_item": "APT-1506", "precio": 555000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1507", "titulo_item": "APT-1507", "precio": 556000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1508", "titulo_item": "APT-1508", "precio": 557000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1401", "titulo_item": "APT-1401", "precio": 540000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1402", "titulo_item": "APT-1402", "precio": 541000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1403", "titulo_item": "APT-1403", "precio": 542000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1404", "titulo_item": "APT-1404", "precio": 543000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1405", "titulo_item": "APT-1405", "precio": 544000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1406", "titulo_item": "APT-1406", "precio": 545000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1407", "titulo_item": "APT-1407", "precio": 546000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1408", "titulo_item": "APT-1408", "precio": 547000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1301", "titulo_item": "APT-1301", "precio": 530000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1302", "titulo_item": "APT-1302", "precio": 531000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1303", "titulo_item": "APT-1303", "precio": 532000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1304", "titulo_item": "APT-1304", "precio": 533000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1305", "titulo_item": "APT-1305", "precio": 534000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1306", "titulo_item": "APT-1306", "precio": 535000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1307", "titulo_item": "APT-1307", "precio": 536000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1308", "titulo_item": "APT-1308", "precio": 537000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1201", "titulo_item": "APT-1201", "precio": 520000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1202", "titulo_item": "APT-1202", "precio": 521000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1203", "titulo_item": "APT-1203", "precio": 522000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1204", "titulo_item": "APT-1204", "precio": 523000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1205", "titulo_item": "APT-1205", "precio": 524000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1206", "titulo_item": "APT-1206", "precio": 525000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1207", "titulo_item": "APT-1207", "precio": 526000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1208", "titulo_item": "APT-1208", "precio": 527000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1101", "titulo_item": "APT-1101", "precio": 510000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1102", "titulo_item": "APT-1102", "precio": 511000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1103", "titulo_item": "APT-1103", "precio": 512000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1104", "titulo_item": "APT-1104", "precio": 513000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1105", "titulo_item": "APT-1105", "precio": 514000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1106", "titulo_item": "APT-1106", "precio": 515000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1107", "titulo_item": "APT-1107", "precio": 516000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1108", "titulo_item": "APT-1108", "precio": 517000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1001", "titulo_item": "APT-1001", "precio": 500000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1002", "titulo_item": "APT-1002", "precio": 501000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1003", "titulo_item": "APT-1003", "precio": 502000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1004", "titulo_item": "APT-1004", "precio": 503000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1005", "titulo_item": "APT-1005", "precio": 504000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1006", "titulo_item": "APT-1006", "precio": 505000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1007", "titulo_item": "APT-1007", "precio": 506000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-1008", "titulo_item": "APT-1008", "precio": 507000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-901", "titulo_item": "APT-901", "precio": 490000000, "moneda": "COP", "estado": "reservado", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-902", "titulo_item": "APT-902", "precio": 491000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-903", "titulo_item": "APT-903", "precio": 492000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-904", "titulo_item": "APT-904", "precio": 493000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-905", "titulo_item": "APT-905", "precio": 494000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-906", "titulo_item": "APT-906", "precio": 495000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-907", "titulo_item": "APT-907", "precio": 496000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-908", "titulo_item": "APT-908", "precio": 497000000, "moneda": "COP", "estado": "reservado", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-801", "titulo_item": "APT-801", "precio": 480000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-802", "titulo_item": "APT-802", "precio": 481000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-803", "titulo_item": "APT-803", "precio": 482000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-804", "titulo_item": "APT-804", "precio": 483000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-805", "titulo_item": "APT-805", "precio": 484000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-806", "titulo_item": "APT-806", "precio": 485000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-807", "titulo_item": "APT-807", "precio": 486000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-808", "titulo_item": "APT-808", "precio": 487000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-701", "titulo_item": "APT-701", "precio": 470000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-702", "titulo_item": "APT-702", "precio": 471000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-703", "titulo_item": "APT-703", "precio": 472000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-704", "titulo_item": "APT-704", "precio": 473000000, "moneda": "COP", "estado": "vendido", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-705", "titulo_item": "APT-705", "precio": 474000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-706", "titulo_item": "APT-706", "precio": 475000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-707", "titulo_item": "APT-707", "precio": 476000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" },
            { "id_interno": "INT-APT-708", "titulo_item": "APT-708", "precio": 477000000, "moneda": "COP", "estado": "disponible", "tipo_inmueble": "APARTAMENTO" }
        ];

        // --- FUNCIONES DE LA INTERFAZ ---
        function getColorForStatus(status) {
            // Normaliza el estado a minúsculas para la comparación
            const normalizedStatus = status ? status.toLowerCase() : '';
            switch (normalizedStatus) {
                case 'disponible': return 'bg-green-500 hover:bg-green-600 border-green-600';
                case 'reservado': return 'bg-yellow-400 hover:bg-yellow-500 border-yellow-500';
                case 'vendido': return 'bg-red-500 hover:bg-red-600 border-red-600';
                default: return 'bg-gray-400 hover:bg-gray-500 border-gray-500';
            }
        }

        const currencyFormatter = new Intl.NumberFormat('es-CO', { style: 'currency', currency: 'COP', minimumFractionDigits: 0 });

        function showModal(apartment) {
            const modal = document.getElementById('details-modal');
            const modalContent = document.getElementById('modal-content');
            // Capitaliza el estado para mostrarlo
            const capitalizedStatus = apartment.estado.charAt(0).toUpperCase() + apartment.estado.slice(1);

            modalContent.innerHTML = `
                <div class="flex justify-between items-start">
                    <h2 class="text-2xl font-bold text-gray-900">${apartment.titulo_item}</h2>
                    <span class="px-3 py-1 text-sm font-medium rounded-full ${getColorForStatus(apartment.estado).replace(/hover:bg-\w+-\d{3}\s?/g, '')} text-white">${capitalizedStatus}</span>
                </div>
                <div class="mt-4 space-y-3 text-gray-600">
                    <p><strong class="font-semibold text-gray-800">Precio:</strong> ${currencyFormatter.format(apartment.precio)}</p>
                    <p><strong class="font-semibold text-gray-800">Piso:</strong> ${apartment.floor || 'No especificado'}</p>
                    <p><strong class="font-semibold text-gray-800">Tipo:</strong> ${apartment.tipo_inmueble}</p>
                    <p><strong class="font-semibold text-gray-800">Proyecto:</strong> RIVER PARK</p>
                    <p><strong class="font-semibold text-gray-800">ID Interno:</strong> ${apartment.id_interno}</p>
                </div>
            `;
            modal.classList.remove('modal-hidden');
            modal.classList.add('modal-visible');
        }

        function closeModal() {
            const modal = document.getElementById('details-modal');
            modal.classList.add('modal-hidden');
            modal.classList.remove('modal-visible');
        }

        // --- EJECUCIÓN PRINCIPAL ---
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('building-layout');
            const loadingStateEl = document.getElementById('loading-state');

            // 1. Filtrar solo los apartamentos del objeto de datos
            const apartments = apartmentData.filter(inmueble => inmueble.tipo_inmueble === 'APARTAMENTO');

            if (apartments.length === 0) {
                loadingStateEl.innerHTML = `<p class="text-center text-gray-500">No se encontraron apartamentos en los datos proporcionados.</p>`;
                return;
            }

            // 2. Extraer el número de piso y agrupar los apartamentos
            const floors = {};
            apartments.forEach(apt => {
                const match = apt.titulo_item.match(/APT-(\d+)/);
                let floorNumber = 0;
                if (match && match[1]) {
                    const num = match[1];
                    // Asume que los dos últimos dígitos son el número de puerta, el resto es el piso.
                    if (num.length > 2) {
                        floorNumber = parseInt(num.substring(0, num.length - 2), 10);
                    } else {
                        floorNumber = parseInt(num, 10); // Para nombres como APT-5, APT-6 etc
                    }
                }
                apt.floor = floorNumber;

                if (!floors[floorNumber]) {
                    floors[floorNumber] = [];
                }
                floors[floorNumber].push(apt);
            });

            // 3. Renderizar la interfaz del edificio
            loadingStateEl.remove();
            container.innerHTML = '';

            // Ordenar los pisos de mayor a menor para mostrar el más alto arriba
            const sortedFloorNumbers = Object.keys(floors).sort((a, b) => b - a);

            sortedFloorNumbers.forEach(floorNumber => {
                const floorRow = document.createElement('div');
                // Ajuste de estilo: gap-2 sm:gap-4 para juntar el label y la grilla
                floorRow.className = "flex items-center gap-2 sm:gap-4 border-b border-gray-200 py-3";

                // Etiqueta del piso
                const floorLabel = document.createElement('div');
                floorLabel.className = "w-16 text-center font-bold text-md text-gray-700";
                floorLabel.innerHTML = `Piso <span class="block text-xl">${floorNumber}</span>`;
                floorRow.appendChild(floorLabel);

                // Contenedor de los apartamentos para ese piso
                const gridDiv = document.createElement('div');
                // Ajuste de estilo: Aumentado el número de columnas para que quepan más
                gridDiv.className = "flex-1 grid grid-cols-5 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 xl:grid-cols-12 gap-1.5";

                // Ordenar apartamentos por nombre y crear sus tarjetas
                floors[floorNumber].sort((a, b) => a.titulo_item.localeCompare(b.titulo_item)).forEach(apt => {
                    const card = document.createElement('div');
                    // Ajuste de estilo: py-1.5 para hacerlos más cortos, rounded para bordes más sutiles
                    card.className = `py-1.5 px-1 rounded text-white font-semibold shadow-sm cursor-pointer transform hover:-translate-y-0.5 transition-all duration-200 border-b-2 text-center ${getColorForStatus(apt.estado)}`;
                    // Ajuste de estilo: text-xs para que el texto encaje mejor
                    card.innerHTML = `<div class="text-xs font-medium">${apt.titulo_item}</div>`;
                    card.addEventListener('click', () => showModal(apt));
                    gridDiv.appendChild(card);
                });

                floorRow.appendChild(gridDiv);
                container.appendChild(floorRow);
            });
        });

        document.getElementById('details-modal').addEventListener('click', function (event) {
            if (event.target === this) closeModal();
        });
    </script>
</body>

</html>